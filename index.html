<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Bella&Bona – Assembly Tracking</title>

<style>
:root {
  --green:#0b5d3b;
  --purple:#6a3db8;
  --bg:#f3f4f6;
  --card:#ffffff;
}

* { box-sizing:border-box; font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif; }

body {
  margin:0;
  background:var(--bg);
  padding:18px;
}

.card {
  max-width:520px;
  margin:auto;
  background:var(--card);
  border-radius:18px;
  padding:22px;
  box-shadow:0 10px 24px rgba(0,0,0,.08);
}

.logo {
  text-align:center;
  margin-bottom:6px;
}

.logo img {
  height:44px;
}

h1 {
  text-align:center;
  margin:10px 0 14px;
}

.instructions {
  background:#eef2ff;
  border-radius:12px;
  padding:14px;
  font-size:14px;
  margin-bottom:16px;
}

label {
  font-weight:600;
  display:block;
  margin-top:14px;
  margin-bottom:6px;
}

input, textarea {
  width:100%;
  padding:12px;
  border-radius:10px;
  border:1px solid #ddd;
  font-size:16px;
}

textarea { resize:none; }

.grid {
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap:10px;
}

.checkbox {
  display:flex;
  align-items:center;
  gap:10px;
  background:#f9fafb;
  padding:10px;
  border-radius:10px;
}

.dishes {
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap:10px;
}

.dish {
  background:#f9fafb;
  padding:10px;
  border-radius:12px;
  text-align:center;
}

.dish input[type="number"] {
  margin-top:6px;
  text-align:center;
}

button {
  width:100%;
  margin-top:20px;
  padding:14px;
  border:none;
  border-radius:14px;
  background:var(--purple);
  color:#fff;
  font-size:18px;
  cursor:pointer;
}

button:active { opacity:.85 }

.success {
  display:none;
  text-align:center;
  color:var(--green);
  font-weight:600;
  margin-top:12px;
}
</style>
</head>

<body>
<div class="card">

  <div class="logo">
    <img src="https://bellabona.com/hubfs/logo-bellabona.svg">
  </div>

  <h1>Assembly Tracking</h1>

  <div class="instructions">
    1. Select date<br>
    2. Tick all employees who worked together<br>
    3. Select dishes (A–Z) and quantities<br>
    4. Submit (you can submit multiple times per day)
  </div>

  <label>Date</label>
  <input type="date" id="date">

  <label>Employees</label>
  <div class="grid" id="employees"></div>

  <label>Dishes (A–Z) + Quantity</label>
  <div class="dishes" id="dishes"></div>

  <label>Comment (optional)</label>
  <textarea id="comment" rows="3"></textarea>

  <button onclick="submitForm()">Submit</button>
  <div class="success" id="success">Saved successfully ✅</div>

</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbyvz8zUDJp7D3Ei4aqS3qQ9rp8clITa1_Vy8o_mVnqC2K6TXntM5CKYvklfaIJ4fQ8tnw/exec";

const employees = [
  "Joel",
  "Jash",
  "Varush",
  "Richa",
  "Hamid",
  "Salman",
  "Ranjith",
  "Sreekanth"
];

const employeeBox = document.getElementById("employees");
employees.forEach(e => {
  employeeBox.innerHTML += `
    <label class="checkbox">
      <input type="checkbox" value="${e}"> ${e}
    </label>`;
});

const dishBox = document.getElementById("dishes");
for (let i=65;i<=90;i++) {
  const l = String.fromCharCode(i);
  dishBox.innerHTML += `
    <div class="dish">
      <strong>${l}</strong>
      <input type="number" min="0" placeholder="Qty" id="dish_${l}">
    </div>`;
}

function submitForm() {
  const date = document.getElementById("date").value;
  const comment = document.getElementById("comment").value;

  const selectedEmployees = [...document.querySelectorAll('#employees input:checked')]
    .map(e => e.value);

  if (!date || selectedEmployees.length === 0) {
    alert("Please select date and at least one employee");
    return;
  }

  let dishes = [];
  for (let i=65;i<=90;i++) {
    const l = String.fromCharCode(i);
    const qty = document.getElementById(`dish_${l}`).value;
    if (qty && qty > 0) dishes.push(`${l}:${qty}`);
  }

  fetch(API_URL, {
    method:"POST",
    body:JSON.stringify({
      date,
      employees:selectedEmployees.join(", "),
      dishes:dishes.join(" | "),
      comment
    })
  }).then(() => {
    document.getElementById("success").style.display="block";
    setTimeout(()=>location.reload(),1200);
  });
}
</script>
</body>
</html>

