<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Bellabona – Assembly Tracking</title>

<style>
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: #f6f7fb;
  margin: 0;
  padding: 16px;
}

.card {
  max-width: 520px;
  margin: auto;
  background: white;
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.08);
}

.logo {
  text-align: center;
  margin-bottom: 10px;
}

.logo img {
  height: 48px;
}

h1 {
  text-align: center;
  margin: 10px 0;
}

.instructions {
  background: #eef3ff;
  padding: 12px;
  border-radius: 10px;
  font-size: 14px;
  margin-bottom: 16px;
}

label {
  font-weight: 600;
  display: block;
  margin-top: 16px;
}

input, select, textarea {
  width: 100%;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid #ddd;
  font-size: 16px;
  margin-top: 6px;
}

.employees {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.employees label {
  font-weight: normal;
}

.dishes {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
  margin-top: 10px;
}

.dish {
  background: #f1f3f9;
  border-radius: 12px;
  padding: 10px;
  text-align: center;
}

.dish strong {
  display: block;
  margin-bottom: 6px;
}

button {
  margin-top: 20px;
  width: 100%;
  padding: 14px;
  border-radius: 14px;
  border: none;
  background: #6a3dbf;
  color: white;
  font-size: 18px;
  font-weight: bold;
}
</style>
</head>

<body>
<div class="card">

<div class="logo">
  <img src="https://bellabona.com/hubfs/logo-bellabona.svg">
</div>

<h1>Assembly Tracking</h1>

<div class="instructions">
1. Select date<br>
2. Tick all employees who worked together<br>
3. Enter dish letters (A–Z) and quantities<br>
4. Submit (you can submit multiple times per day)
</div>

<label>Date</label>
<input type="date" id="date">

<label>Employees</label>
<div class="employees" id="employees"></div>

<label>Dishes (A–Z) + Quantity</label>
<div class="dishes" id="dishes"></div>

<label>Role</label>
<select id="role">
  <option>Main</option>
  <option>Assist</option>
  <option>Support</option>
</select>

<label>Comment (optional)</label>
<textarea id="comment"></textarea>

<button onclick="submitForm()">Submit</button>

</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyvz8zUDJp7D3Ei4aqS3qQ9rp8clITa1_Vy8o_mVnqC2K6TXntM5CKYvklfaIJ4fQ8tnw/exec";

const employees = [
  "Joel","Jash","Varush","Richa","Hamid",
  "Salman","Ranjith","Sreekanth"
];

const empBox = document.getElementById("employees");
employees.forEach(n => {
  empBox.innerHTML += `<label><input type="checkbox" value="${n}"> ${n}</label>`;
});

const dishBox = document.getElementById("dishes");
for (let i = 65; i <= 90; i++) {
  const letter = String.fromCharCode(i);
  dishBox.innerHTML += `
    <div class="dish">
      <strong>${letter}</strong>
      <input type="number" min="0" placeholder="Qty" id="dish_${letter}">
    </div>`;
}

function submitForm() {
  const date = document.getElementById("date").value;
  const role = document.getElementById("role").value;
  const comment = document.getElementById("comment").value;

  const selectedEmployees = [...document.querySelectorAll(".employees input:checked")]
    .map(e => e.value);

  let dishes = [];
  for (let i = 65; i <= 90; i++) {
    const l = String.fromCharCode(i);
    const qty = document.getElementById(`dish_${l}`).value;
    if (qty && qty > 0) dishes.push(`${l}:${qty}`);
  }

  if (!date || selectedEmployees.length === 0 || dishes.length === 0) {
    alert("Please fill date, employees and at least one dish");
    return;
  }

  fetch(SCRIPT_URL, {
    method: "POST",
    body: JSON.stringify({
      date,
      employees: selectedEmployees,
      dishes: dishes.join(" | "),
      role,
      comment
    })
  })
  .then(() => alert("Saved successfully"))
  .catch(() => alert("Error saving data"));
}
</script>
</body>
</html>

